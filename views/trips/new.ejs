<!-- views/trips/new.ejs -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/stylesheets/style.css">
    <title>Add a New App</title>
</head>
<body>
    <%- include('../partials/_navbar.ejs') %>
    <h1>Add a New Trip</h1>

    <form action="/users/<%=user._id%>/trips" method="POST">

        <label for="name">Name:</label>
        <input type="text" name="name" id="name" required>

        <label for="email">Email:</label>
        <input type="email" name="email" id="email" required>

        
        <label for="age">Age:</label>
        <input type="number" name="age" id="age" required>
        
        <label for="gender">Gender:</label>
        <select name="gender" id="gender">

        <option value="male">Male</option>
        <option value="female">Female</option>
        </select>

        <label for="startLocation">Start Location:</label>
        <input type="text" name="startLocation" id="startLocation" required>

        <label for="endLocation">End Location:</label>
        <input type="text" name="endLocation" id="endLocation">

        <label for="availableSeats">Available Seats:</label>
        <input type="number" name="availableSeats" id="availableSeats">


        <label for="date">Date:</label>
        <input type="date" name="date" id="date" required>



        <button type="submit">Add trip</button>
    </form>
    <script>
        // Function to format the date to YYYY-MM-DD
        function formatDate(date) {
            const d = new Date(date);
            let month = '' + (d.getMonth() + 1);
            let day = '' + d.getDate();
            const year = d.getFullYear();

            if (month.length < 2) month = '0' + month;
            if (day.length < 2) day = '0' + day;

            return [year, month, day].join('-');
        }

        // Set the min attribute for the date input to today's date
        const today = new Date();
        document.getElementById('date').setAttribute('min', formatDate(today));
    </script>

</body>
</html>